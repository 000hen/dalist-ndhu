# NDHU Schedule Manager

A modern web application for National Dong Hwa University (NDHU) students to fetch, decode, and manage their class schedules with QR code export functionality.

> [!NOTE]
> The UI/README parts is generated by AI. It may contain inaccuracies. Please verify the details before use.

## üåü Features

### üìÖ Schedule Management

- **PDF Parsing**: Extract schedule data from university PDF documents
- **Smart Processing**: Choose between merged or split schedule display modes
- **Interactive Display**: Clean, responsive interface showing course details

### üì± QR Code Export

- **Generate QR Codes**: Create QR codes containing complete schedule data
- **Multiple Export Options**: Download as PNG image or copy direct links
- **Dalist Support**: Add schedules to Dalist app
- **Easy Sharing**: Share schedules with classmates effortlessly

### üîß Technical Features

- **Real-time Processing**: Live PDF extraction and parsing
- **Error Handling**: Comprehensive error management and user feedback
- **Responsive Design**: Works seamlessly on desktop and mobile devices
- **TypeScript**: Full type safety throughout the application

## üõ†Ô∏è Tech Stack

### Frontend

- **Next.js 15** - React framework with App Router
- **TypeScript** - Type-safe development
- **Tailwind CSS** - Utility-first CSS framework
- **React QR Code** - QR code generation

### Backend

- **Node.js** - Runtime environment
- **Python** - PDF processing scripts
- **Next.js API Routes** - Backend API endpoints

### PDF Processing

- **pypdf** - PDF manipulation
- **tabula-py** - Table extraction from PDFs
- **pandas** - Data processing

## üöÄ Getting Started

### Prerequisites

1. **Node.js** (v22 or higher)
2. **Python** (v3.8 or higher)
3. **Java Runtime Environment** (required for tabula-py)
4. **Yarn** package manager

### Installation

1. **Clone the repository**

   ```bash
   git clone https://github.com/yourusername/dalist-ndhu.git
   cd dalist-ndhu
   ```

2. **Install Node.js dependencies**

   ```bash
   yarn install
   ```

3. **Install Python dependencies**

   ```bash
   pip install -r requirements.txt
   ```

4. **Set up environment variables**

   ```bash
   cp .env.local.example .env.local
   ```

   Edit `.env.local` and add:

   ```env
   NDHU_SCHEDULE_URL=https://your-ndhu-schedule-url-here
   ```

5. **Start the development server**

   ```bash
   yarn dev
   ```

6. **Open your browser**
   Navigate to [http://localhost:3000](http://localhost:3000)

## üìã Usage

### Basic Workflow

1. **Login**: Enter your NDHU student ID and password
2. **Choose Mode**: Select between merged or split schedule display
3. **View Schedule**: Browse your weekly schedule in an organized layout
4. **Generate QR Code**: Export your schedule for use in other applications

### Schedule Display Modes

#### Merged Mode (Default)

- Combines consecutive time slots for the same course
- Provides a cleaner, more compact view
- Shows course duration ranges (e.g., 09:10-12:00)

#### Split Mode

- Shows each time slot individually
- Useful for detailed schedule analysis
- Displays every class period separately

### QR Code Features

- **Generate**: Click "Generate QR Code" below your schedule
- **Download**: Save QR code as PNG image
- **Copy Link**: Copy the `dalist://` protocol link
- **Share**: Send QR codes or links to friends

## üèóÔ∏è Project Structure

```tree
dalist-ndhu/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/           # API routes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ class/         # TypeScript classes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/    # React components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ enums/         # Type definitions
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ process/       # Data processing logic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ struct/        # Type interfaces
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/         # Utility functions
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ extractor.py       # Python PDF extraction script
‚îÇ   ‚îî‚îÄ‚îÄ splitable_table.txt # Course location keywords
‚îú‚îÄ‚îÄ public/                # Static assets
‚îú‚îÄ‚îÄ requirements.txt       # Python dependencies
‚îî‚îÄ‚îÄ package.json          # Node.js dependencies
```

## üîß Configuration

### Environment Variables

Create a `.env.local` file with:

```env
# NDHU Schedule System URL
NDHU_SCHEDULE_URL=https://your-university-schedule-system-url

# Optional: Additional configuration
NODE_ENV=development
```

### Python Dependencies

The application requires these Python packages:

- `pypdf>=6.0.0` - PDF reading and writing
- `tabula-py>=2.10.0` - Table extraction
- `pandas>=2.3.2` - Data manipulation

## ü§ù Contributing

We welcome contributions! Please follow these steps:

1. **Fork the repository**
2. **Create a feature branch**

   ```bash
   git checkout -b feature/amazing-feature
   ```

3. **Commit your changes**

   ```bash
   git commit -m 'Add some amazing feature'
   ```

4. **Push to the branch**

   ```bash
   git push origin feature/amazing-feature
   ```

5. **Open a Pull Request**

### Development Guidelines

- Use TypeScript for type safety
- Follow the existing code style
- Add comments for complex logic
- Test your changes thoroughly

## üìÑ API Documentation

### Login Endpoint

```typescript
POST /api/login
Content-Type: application/json

{
  "username": "string",    // NDHU student ID
  "password": "string",    // NDHU password
  "combine": boolean       // Schedule display mode
}
```

**Response:**

```typescript
{
  "success": true,
  "schedule": FormatedPDFDecoded[]
}
```

## üêõ Troubleshooting

### Common Issues

1. **"Java not found" error**
   - Install Java Runtime Environment (JRE) or Java Development Kit (JDK)
   - Ensure Java is in your system PATH

2. **"pypdf not found" error**
   - Run: `pip install -r requirements.txt`
   - Check Python installation and PATH

3. **"Invalid credentials" error**
   - Verify NDHU student ID and password
   - Check if NDHU_SCHEDULE_URL is correctly configured

4. **QR Code generation fails**
   - Check browser console for detailed errors
   - Ensure all schedule data is properly loaded

## üìù License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## üôè Acknowledgments

- **National Dong Hwa University** for providing the schedule system
- **Next.js team** for the excellent framework
- **Python community** for powerful PDF processing libraries
- **Contributors** who help improve this project

## üìû Support

If you encounter any issues or have questions:

1. Check the [Issues](https://github.com/yourusername/dalist-ndhu/issues) page
2. Create a new issue with detailed information
3. Include error messages and steps to reproduce

---

**Made with ‚ù§Ô∏è for NDHU students**
